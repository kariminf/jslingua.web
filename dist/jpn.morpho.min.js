!function(){"use strict";let e={};"object"==typeof module&&module&&"object"==typeof module.exports?(e=require("../morpho.js"),module.exports=f):(e=window.JsLingua.Cls.Morpho,window.JsLingua.addService("Morpho","jpn",f));let t=e.Feature,n=t.Tense,r=t.Mood,o=t.Voice,s=t.Number,i=t.Aspect,c=t.Gender,u=t.Person,a=Object.freeze;const l=a({Pl:"plain",Po:"polite"}),d=a({V1:"ichidan",V5:"godan",SK:"suru-kuru"});function f(){e.call(this,"jpn"),e.newStemmer.call(this,"jslinguaJpnStemmer","JsLingua Japanese stemmer",S)}f.prototype=Object.create(e.prototype);let m=f.prototype;m.constructor=f,m.getForms=function(){return{Present:{tense:n.Pr},Past:{tense:n.Pa},"Present continuous":{tense:n.Pr,aspect:i.C},"Past continuous":{tense:n.Pa,aspect:i.C},Provision:{mood:r.Cnd,cond:"ba"},Condition:{mood:r.Cnd,cond:"tara"},Imperative:{mood:r.Imp},Volitional:{mood:r.Opt},Causative:{cause:1},Potential:{mood:r.Pot},Passive:{voice:o.P,tense:n.Pr},"Causative Passive":{voice:o.P,tense:n.Pr,cause:1}}},m.getVerbTypes=function(){return Object.values(d)},m.getConjugModel=function(){return{rows:["Formality"],cols:["Negation"]}};m.getOptLists=function(t){return"Formality"===t?[{formality:l.Pl},{formality:l.Po}]:e.prototype.getOptLists.call(this,t)},m.getOptName=function(t,n){return"Formality"===t?n.formality?n.formality:"":e.prototype.getOptName.call(this,t,n)},m.getPronounOpts=function(){return[{person:u.F,number:s.S},{person:u.F,number:s.P},{person:u.S,number:s.S},{person:u.S,number:s.P},{person:u.T,number:s.S,gender:c.M},{person:u.T,number:s.S,gender:c.F},{person:u.T,number:s.P}]},m.getPronounName=function(e){switch(e.person){case u.F:return e.number===s.S?"私":"私たち";case u.S:return e.number===s.S?"あなた":"あなたたち";case u.T:if(e.number!=s.S)return"彼ら";switch(e.gender){case c.M:return"彼";case c.F:return"彼女";default:return"彼"}}return""};const p="うるくすつむぬぶぐず",P="いりきしちみにびぎじ",g="えれけせてめねべげず",$="っっいしっんんんいじ",h="わらかさたまなばがじ";function x(e,t,n){let r=e.slice(-1);return p.indexOf(r)<0?"":t===p?e:n===d.V1?t===g?e.slice(0,-1)+"れ":e.slice(0,-1):n===d.SK?t===g?e.slice(0,-1)+"れ":e.endsWith("くる")?(e=e.slice(0,-2),t===P?e+"き":e+"こ"):e.endsWith("来る")?e.slice(0,-1):e.slice(0,-2)+"し":e.slice(0,-1)+t.charAt(p.indexOf(r))}function y(e,t,n){let r=e.slice(-1);if(p.indexOf(r)<0)return"";let o="て";return p.indexOf(r)>4?(o="で",t&&(o="だ")):t&&(o="た"),n===d.V1?e.slice(0,-1)+o:n===d.SK?e.endsWith("くる")?e.slice(0,-2)+"き"+o:e.endsWith("する")?e.slice(0,-2)+"し"+o:e.slice(0,-1)+o:/[行いゆ]く$/g.test(e)?e.slice(0,-1)+"っ"+o:(o=$.charAt(p.indexOf(r))+o,e.slice(0,-1)+o)}const b={"い":1,"き":1,"け":1,"し":1,"じ":1,"ね":1,"び":1,"上":1,"下":1,"与":1,"中":1,"乗":1,"乘":1,"亘":1,"亙":1,"交":1,"代":1,"伐":1,"余":1,"作":1,"侍":1,"依":1,"侮":1,"便":1,"係":1,"倚":1,"借":1,"偏":1,"偽":1,"傲":1,"優":1,"光":1,"入":1,"写":1,"冠":1,"凍":1,"凝":1,"凭":1,"分":1,"切":1,"刈":1,"判":1,"到":1,"刳":1,"刷":1,"剃":1,"則":1,"削":1,"剔":1,"剥":1,"剪":1,"割":1,"創":1,"劣":1,"労":1,"勝":1,"募":1,"去":1,"参":1,"反":1,"取":1,"叱":1,"司":1,"吃":1,"吊":1,"告":1,"呵":1,"呷":1,"呻":1,"哮":1,"唆":1,"唸":1,"啜":1,"喋":1,"嘲":1,"噛":1,"囀":1,"囓":1,"回":1,"因":1,"困":1,"図":1,"在":1,"坐":1,"執":1,"堪":1,"塗":1,"填":1,"売":1,"変":1,"太":1,"奉":1,"契":1,"奔":1,"奢":1,"妊":1,"娶":1,"嬲":1,"孕":1,"孵":1,"守":1,"実":1,"宿":1,"寄":1,"尖":1,"屠":1,"嵌":1,"巡":1,"帰":1,"座":1,"廃":1,"廻":1,"弄":1,"弱":1,"張":1,"当":1,"彩":1,"彫":1,"徹":1,"忘":1,"怒":1,"怖":1,"怠":1,"悖":1,"悟":1,"慊":1,"慮":1,"憚":1,"憤":1,"懸":1,"戍":1,"成":1,"截":1,"戯":1,"戻":1,"承":1,"抉":1,"抓":1,"折":1,"抛":1,"択":1,"拈":1,"拗":1,"拘":1,"拠":1,"括":1,"挙":1,"振":1,"挵":1,"捕":1,"捗":1,"捥":1,"捩":1,"据":1,"捻":1,"掌":1,"掏":1,"掘":1,"掛":1,"掠":1,"採":1,"探":1,"換":1,"握":1,"揺":1,"搾":1,"摂":1,"摩":1,"摺":1,"撓":1,"撚":1,"撮":1,"撲":1,"擂":1,"操":1,"擦":1,"擲":1,"擽":1,"攣":1,"放":1,"敗":1,"散":1,"斬":1,"断":1,"昂":1,"昇":1,"明":1,"映":1,"曇":1,"曲":1,"替":1,"有":1,"杓":1,"来":1,"染":1,"梱":1,"梳":1,"極":1,"模":1,"止":1,"歸":1,"残":1,"殴":1,"殺":1,"毟":1,"氷":1,"決":1,"沒":1,"没":1,"治":1,"泊":1,"泝":1,"浸":1,"渉":1,"渋":1,"減":1,"渡":1,"測":1,"湿":1,"溜":1,"溯":1,"滑":1,"滞":1,"滴":1,"滾":1,"漁":1,"漏":1,"演":1,"漬":1,"漲":1,"潜":1,"濁":1,"灯":1,"炒":1,"炙":1,"点":1,"烟":1,"焙":1,"焦":1,"煉":1,"煎":1,"煙":1,"照":1,"煽":1,"熬":1,"燻":1,"犯":1,"狩":1,"猛":1,"猟":1,"生":1,"甦":1,"由":1,"留":1,"畝":1,"異":1,"疑":1,"痙":1,"痼":1,"登":1,"盗":1,"盛":1,"直":1,"眠":1,"睡":1,"瞋":1,"瞑":1,"瞠":1,"瞻":1,"知":1,"破":1,"磨":1,"祀":1,"祈":1,"祟":1,"祭":1,"祷":1,"移":1,"稔":1,"積":1,"穫":1,"穿":1,"競":1,"篭":1,"籠":1,"粘":1,"糶":1,"細":1,"終":1,"絞":1,"綴":1,"練":1,"縁":1,"縊":1,"縋":1,"縒":1,"縛":1,"縢":1,"繁":1,"織":1,"繰":1,"纏":1,"罵":1,"罹":1,"翳":1,"翻":1,"耽":1,"肖":1,"肥":1,"腐":1,"至":1,"興":1,"舐":1,"苅":1,"苦":1,"茂":1,"茹":1,"葬":1,"蒙":1,"薫":1,"蘇":1,"蟠":1,"蠱":1,"行":1,"被":1,"要":1,"覆":1,"覚":1,"解":1,"触":1,"計":1,"訛":1,"訝":1,"詐":1,"詣":1,"詰":1,"誇":1,"語":1,"誤":1,"誹":1,"諮":1,"謀":1,"謗":1,"謙":1,"謝":1,"謬":1,"譏":1,"識":1,"譲":1,"護":1,"象":1,"貪":1,"貼":1,"賜":1,"贈":1,"走":1,"起":1,"趨":1,"足":1,"跨":1,"跳":1,"踊":1,"踞":1,"蹲":1,"蹴":1,"躄":1,"躍":1,"躙":1,"軋":1,"載":1,"辷":1,"辿":1,"返":1,"迫":1,"迸":1,"送":1,"透":1,"通":1,"造":1,"逸":1,"逼":1,"過":1,"遜":1,"遡":1,"遣":1,"遮":1,"遷":1,"選":1,"遺":1,"避":1,"還":1,"配":1,"釁":1,"重":1,"量":1,"釣":1,"鈍":1,"錯":1,"録":1,"鐫":1,"鑽":1,"関":1,"阿":1,"限":1,"陞":1,"陥":1,"陰":1,"障":1,"隠":1,"隣":1,"雕":1,"霾":1,"頻":1,"頼":1,"飜":1,"飾":1,"馘":1,"香":1,"駆":1,"騙":1,"驕":1,"鳴":1,"鴨":1,"黙":1,"齧":1};m.getVerbType=function(e){if(/(出来)る$/g.test(e))return d.V1;if(/(す|く|来)る$/g.test(e))return d.SK;let t=e.slice(-1),n=e.slice(-2,-1);if("る"===t){if(!"いえしせちてにねびべみめりれ".includes(n)){let e=n.charCodeAt(0);if(12352<=e&&e<=12447)return d.V5}if(/(甦え|蘇え|嘲け|ちぎ|かえ|横ぎ|阿ね|きい|かぎ|はい|はし|しゃべ|たべ|まえ)る$/g.test(e)||b[n])return d.V5;return d.V1}return d.V5},m.conjugate=function(e,t){t.mood||(t.mood=r.Ind);let s=t.vtype?t.vtype:this.getVerbType(e),c="";switch(t.cause&&(c="せる",s!==d.V1&&s!==d.SK||(c="さ"+c),e=e.endsWith("する")?e.slice(0,-2)+c:x(e,h,s)+c,s=d.V1),t.voice===o.P&&t.mood!==r.Pot&&(c="れる",s!==d.V1&&s!==d.SK||(c="ら"+c),e=e.endsWith("する")?e.slice(0,-2)+"される":x(e,h,s)+c,s=d.V1),t.mood){case r.Ind:switch(c="",t.aspect===i.C&&(e=y(e,0,s),s=d.V1,e+="いる"),t.formality){case l.Po:return e=x(e,P,s),c="ます",t.tense===n.Pa&&(c="ました"),t.negated&&(c="ません",t.tense===n.Pa&&(c+="でした")),e+c;case l.Pl:return t.tense===n.Pa&&(c="ました"),t.negated?(e=x(e,h,s),c=t.tense===n.Pa?"なかった":"ない"):t.tense===n.Pa&&(e=y(e,1,s),c=""),e+c;default:return""}case r.Imp:switch(c="",t.formality){case l.Po:return t.negated?(e=x(e,h,s),c="ないで"):e=y(e,0,s),e+c+"下さい";case l.Pl:return t.negated?e+"な":s===d.V1?e.slice(0,-1)+"(ろ/よ)":s===d.SK?e.endsWith("くる")?e.slice(0,-2)+"こい":e.endsWith("来る")?e.slice(0,-1)+"い":e.slice(0,-2)+"(しろ/せよ)":x(e,g,s);default:return""}case r.Pot:if(t.voice===o.P)return"";e=e.endsWith("する")?e.slice(0,-2)+"出来る":s===d.V1?e.slice(0,-1)+"られる":x(e,g,s)+"る";{let n=Object.assign({},t);return n.mood=r.Ind,n.vtype=d.V1,this.conjugate(e+c,n)}case r.Cnd:if(t.voice===o.P)return"";if("ba"===t.cond)return t.formality===l.Po?"":t.negated?x(e,h,s)+"なければ":x(e,g,s)+"ば";{let o=Object.assign({},t);return o.mood=r.Ind,o.tense=n.Pa,this.conjugate(e,o)+"ら"}case r.Opt:return t.voice===o.P?"":t.negated?(e+="のは止め",t.formality===l.Pl?e+"よう":e+"ましょう"):t.formality!==l.Pl?x(e,P,s)+"ましょう":(e=x(e,"おろこそとものぼごじ",s),s!==d.V1&&s!==d.SK||(e+="よ"),e+"う");default:return""}};const V=[{e:/^(.*)で(?:した|す)$/,r:"$1"},{e:/^(.*)(?:じゃ|では)(?:ない|ありません)$/,r:"$1"},{e:/^(.+[てで])(?:いる?|う)$/,r:"$1"},{e:/^(.*)(.+)(?:ま(?:した|す|せん|しょう)|たい)$/,r:function(e,t,n){let r=P.indexOf(n);return r>-1?t+p[r]:t+n}},{e:/^(.*)(.+)な(?:い|かった|ければ(?:なる)?)$/,r:function(e,t,n){if("く"===n)return t+"い";let r=h.indexOf(n);return r>-1?t+p[r]:t+n}},{e:/^(.+)(?:させ|られ)る?$/,r:"$1"},{e:/^(.*[い行])っ[てた]$/,r:"$1く"},{e:/^(.*)([^っいん])([っいん]?[てでただ])$/,r:function(e,t,n,r){return/^い[てた]$/.test(n+r)?t+"く":/^い[でだ]$/.test(n+r)?t+"ぐ":/^し[てた]$/.test(n+r)?t+"す":t+n}}];function S(e){let t=e,n=1;for(;n;){n=0;for(let e=0;e<V.length;e++){let r=V[e];r.e.test(t)&&(t=t.replace(r.e,r.r),n=1)}}return t}function O(e){return null!=e}m.normalize=function(e,t){let n;return O(n=/^(.*ね)[えぇ]+$/.exec(e))?n[1]:O(n=/^(.*な)[あぁ]+$/.exec(e))?n[1]:O(n=/^(.*す)げ[えぇ]+$/.exec(e))?n[1]+"ごい":O(n=/^(.*)やない$/.exec(e))?n[1]+"じゃない":O(n=/^(.*)ばい$/.exec(e))?n[1]+"よ":O(n=/^(.*)へん$/.exec(e))?n[1]+"ない":O(n=/^(.*)さかい$/.exec(e))?n[1]+"から":O(n=new RegExp("^(.+)(["+P+"])んさんな").exec(e))?n[1]+h[P.indexOf(n[2])]+"ないでください":O(n=/^(.*)んさんな$/.exec(e))?n[1]+"ないでください":O(n=/^(.*)[え]+$/.exec(e))?n[1]+"よ":O(n=/^(.*て)ちょう$/.exec(e))?n[1]+"ください":O(n=/^(.*[^だ])だ?べ$/.exec(e))?n[1]+"でしょう":O(n=/^(.*)っしょ$/.exec(e))?n[1]+"でしょう":O(n=/^(.*)しょや$/.exec(e))?n[1]+"でしょう":e}}();